# 第 3 次作业 – 正则语言的性质
## 习题 4.1.2
证明下列语言都不是正则的：
- e） 由 0 和 1 构成的 𝑤𝑤 形式的串的集合，也就是某个串重复的串集合。
- f） 由 0 和 1 构成的 $𝑤𝑤^𝑅$ 形式的串的集合，也就是由某个串后面跟着它的反转所构成的串的集合。（一个串的逆的形式化定义见 4.2.2 节。）
- g） 由 0 和 1 构成的 $w\overline{w}$ 形式的串的集合，其中  $w\overline{w}$  是把 𝑤中所有的 0 都换成 1 同时把所有的 1 都换成 0 而得到的串，例如，$\overline{011} = 100$，因此 011100 是该语言中的一个串。
- h） 所有由 0 和 1 构成的 $𝑤1^𝑛$ 形式的串的集合，其中 𝑤是由 0 和 1 构成的长度为 𝑛 的 串。
### e)
- 假设该语言 𝐿 是正则的，则存在一常数n使得𝐿满足泵引理即 𝐿的泵长度为 n 。
- 构造串$0^n10^n1$,$|0^n10^n1|\geq n$
- s 前p 个字符串都是0 ，所以根据泵引理，y 必然由0组成。
	- $x=0^{n-m},y=0^m,z=10^n1,xyyz=0^{n+m}10^n1$不属于𝐿
- 所以该语言 𝐿 不是正则的
### f）
- 假设该语言 𝐿 是正则的，则存在一常数n使得𝐿满足泵引理即 𝐿的泵长度为 n 。
- 构造串$0^n110^n$,$|0^n110^n|\geq n$
- s 前p 个字符串都是0 ，所以根据泵引理，y 必然由0组成。
	- $x=0^{n-m},y=0^m,z=110^n,xyyz=0^{n+m}110^n$不属于𝐿
- 所以该语言 𝐿 不是正则的
### g）
- 假设该语言 𝐿 是正则的，则存在一常数n使得𝐿满足泵引理即 𝐿的泵长度为 n 。
- 构造串$0^n11^n0$,$|0^n11^n0|\geq n$
- s 前p 个字符串都是0 ，所以根据泵引理，y 必然由0组成。
	- $x=0^{n-m},y=0^m,z=11^n0,xyyz=0^{n+m}11^n0$不属于𝐿
- 所以该语言 𝐿 不是正则的
### h）
-  假设该语言 𝐿 是正则的，且 𝐿的泵长度为 p。
- 构造串s=$1^{2n}$,
-  s 前p 个字符串都是1 ，所以根据泵引理，y 必然由1组成。
-  $x=1^{p-m},y=1^m,z=1^{2n-p},xyyz=1^{n+m}1^n$, $w=1^{n+m},|w|大于 n$，s不属于𝐿
- 所以该语言 𝐿 不是正则的


## 习题 4.1.3
证明下列语言都不是正则的： 
- a） 所有满足以下条件的串的集合：由 0 和 1 构成，开头的是 1，并且当我们把该串看作是一个整数时该整数是一个素数。
- b） 所有满足以下条件的 $0^𝑖 1^𝑗$ 形式的串的集合： 𝑖 和 𝑗 的最大公约数是 1。
### a）
- 设字符串L=xyz,|y|=l,|z|=m,则L可以看作$2^{l+m}x+2^my+z=q$
- $xy^kz$可以看作$2^{kl+m}x+\sum_{j=0}^{k-1}2^{m+jl}y+z=p$
- 证明L不是正则语言即证，q为素数情况下，存在k，p不为素数
- 考察k=q
- $\sum_{j=0}^{q-1}2^{m+jl}=2^m\frac{2^{lq}-1}{2^l-1}$
- $p=q+\left(2^{q l}-2^{l}\right) 2^m\cdot x + 2^{m} \cdot \left(\frac{2^{q l}-1}{2^{l}-1}-1\right) \cdot y$
	- $=q+\left(2^{(q-1) l}-1\right) 2^{m+l}\cdot x + 2^{m} \cdot \left(\frac{2^{q l}-1}{2^{l}-1}-1\right) \cdot y$
- 由费马小定理知$2^{q-1}\equiv 1 \mod q$
- 得$(2^{(q-1) l}\equiv 1 \mod q$
- 得$\left(2^{(q-1) l}-1\right)|p$即$\left(2^{q l}-2^{l}\right)|p$
- 又：

$$
\frac{2^{q l}-1}{2^{l}-1}-1 = \frac{2^{q l}-2^1}{2^{l}-1} =\frac{k^{\prime} q}{2^{l}-1}  =+ 2^{l} + \cdots + 2^{(q-1) l}
$$

由于等式右侧为整数，可得
$$
\frac{k^{\prime} q}{2 l-1} \in \mathbb{Z}
$$
又因为  q 为素数，因此 \( q \) 与 $2^{l} - 1$ 互质，从而
$$
\frac{k^{\prime}}{2 ^l-1} \in \mathbb{Z}
$$
因此有：
$$
\frac{k^{\prime} q}{2^ l-1} |q 即 (\frac{2^{q l}-1}{2^{l}-1}-1) |q
$$
- 综上，p|q
- 因此，𝑝 是合数不属于正则语言 𝐿。综上所述，𝐿不是正则语言。
### b)
- 假设该语言 𝐿 是正则的，则存在一常数n使得𝐿满足泵引理即 𝐿的泵长度为 n 。
- 构造$n<=q,s=0^q1^{(q-1)!},q为素数$
- q与(q-1)!互质，$s\in  𝐿$
- s 前n 个字符串都是0 ，所以根据泵引理，y 必然由0组成。
	- $x=0^{n-m},y=0^m,z=0^{q-n}1^{(q-1)!},xy^qz=0^{qm+q}1^{(q-1)!}$
	- $m+1 \in [2,q-1]$
	- $(q(m+1),(q-1)!)=m+1\neq 1$
	- s不属于𝐿
- 所以该语言 𝐿 不是正则的
## 习题 4.2.2
如果 𝐿是一个语言，𝑎是一个符号，则 𝐿/𝑎（称作 𝐿 和 𝑎𝑎的商）是所有满足如下条件的串 𝑤 的集合：𝑤𝑎 属于 𝐿 。例如，如果 𝐿= {𝑎, 𝑎𝑎𝑏, 𝑏𝑏𝑎}，则 𝐿/𝑎 = {𝜀, 𝑏𝑏}，证明：如果 𝐿 是正则的，那么 𝐿/𝑎 也是．提示：从 𝐿的 DFA 出发，考虑接受状态的集合。
- 对于正则语言 𝐿，存在一个 DFA $𝑀 = (𝑄, Σ, 𝛿, 𝑞_0,𝐹)$，使得 𝐿(𝑀) = 𝐿。
- ,构造 DFA $𝑀' =(𝑄, Σ, 𝛿, 𝑞_0,𝐹')$，其中：
$$
F'=\{q|𝛿(𝑞, 𝑎) \in 𝐹, 𝑞 \in 𝑄\}
$$
- 现证明$L(M')=L/a$
- 即证$wa \in L(M),w \in L(M')$
 $$
	 wa \in L(M) \leftrightarrow \delta(q_0,wa) \in F\leftrightarrow \delta(\delta(q_0,w),a) \in F\leftrightarrow \delta(q_0,w) \in F' \leftrightarrow w \in L(M')
	$$
- 如果 𝐿 是正则的，那么 𝐿/𝑎 也被DFA接受，即L/a也是正则的
## 习题 4.2.7
如果$𝑤 = 𝑎_1𝑎_2 ⋯ 𝑎_𝑛$ 和 $𝑥 = 𝑏_1𝑏_2 ⋯ 𝑏_𝑛$ 是同样长度的串，定义 𝑎lt (𝑤, 𝑥) 是把 𝑤 和 𝑥 交叉起来且以 𝑤 开头所得到的串，即$𝑎_1𝑏_1𝑎_2𝑏_2 ⋯ 𝑎_𝑛𝑏_𝑛$。如果 𝐿 和 𝑀 是语言，定义  𝑎lt (𝐿, 𝑀) 是所有形式为𝑎lt (𝑤, 𝑥) 的串的集合，其中 𝑤是 𝐿 中的任意串，而 𝑥是 𝑀中与 𝑤 等长的任意串。证明：如果 𝐿和 𝑀 都是正则的，那么  𝑎lt (𝐿, 𝑀)  也是
-  对于正则语言 𝐿，存在一个 DFA $𝑀_A = (𝑄_A, Σ_A, 𝛿_A, 𝑞_{0A},𝐹_A)$，使得 $𝐿(𝑀_A) = 𝐿$。
- 对于正则语言 M，存在一个 DFA $𝑀_B = (𝑄_B, Σ_B, 𝛿_B, 𝑞_{0B},𝐹_B)$，使得 $𝐿(𝑀_B) = 𝐿$。
- 构造 DFA $𝑀 =(𝑄, Σ, 𝛿, 𝑞_0,𝐹)$，其中：
$$1. Q=\{(0,q_a,q_b)\cup (1,q_a,q_b)|q_a \in Q_A,q_b \in Q_B\}$$
$$2.Σ=Σ_A \cup Σ_B$$
$$3.
\delta((s,q_a, q_b),x) = 
\begin{cases} 
(1,\delta_A(q_a, x), q_b), & \text{if } s = 0,x\in Σ_A \\
(0,q_a; \delta(q_b, x)), & \text{if } s = 1 ,x\in Σ_B 
\end{cases}
$$
$$4.q_0=(0,q_{0A},q_{0B})$$
$$ 5.F=\{(0,F_a,F_b)|F_a \in F_A,F_b \in F_B\}$$
- $\delta((0,q_{0A},q_{0B}),𝑎_1𝑏_1𝑎_2𝑏_2 ⋯ 𝑎_𝑛𝑏_𝑛)=(0,\delta (q_{0A},𝑎_1𝑎_2 ⋯ 𝑎_𝑛),\delta(q_{0B},𝑏_1𝑏_2 ⋯ 𝑏_𝑛))=(0,F_a,F_b)$
- $L(M)=alt(L,M)$,因此$alt(L,M)$是正则语言

## 习题 4.2.8 
设 𝐿是一个语言，定义 ℎ𝑎lf(𝐿) 是所有 𝐿 中串的前一半构成的集合，即 {𝑤|对于某个满足 |𝑥| = |𝑤|的 𝑥，𝑤𝑥 属于 𝐿}。例如，如果 𝐿= {𝜀, 0010, 011, 010110}，则 ℎ𝑎lf(𝐿) = {𝜀, 00,010}。注意，长度为奇数的串对于 ℎ𝑎lf(𝐿) 没有贡献。证明：如果 𝐿 是正则的，那么ℎ𝑎lf(𝐿) 也是。
- 对于正则语言 𝐿，存在一个 DFA $𝑀 = (𝑄, Σ, 𝛿, 𝑞_0,𝐹)$，使得 𝐿(𝑀) = 𝐿。
- 构造 DFA $𝑀' =(𝑄', Σ, 𝛿', 𝑞_0,𝐹')$，其中：
$$Q'=\{[q,S]|q \in Q,在子串w有 \delta(q_0,w)=q时s=\{ \delta(q,w')| w'\in Σ^{|w|}\}\}  $$
$$ \delta'([q,S],a)=[\delta(q,a),T](T=\{t|所有x \in Σ,s\in S, \delta(s,x)=t\})$$
$$ F'=\{[q,S]|F \cap s \neq \emptyset\}$$
- 这个DFA M‘能识别能被M识别的串的前半部分
	- 因为能被M'识别的串，在后面加入任意相同长度的串组成的新串一定存在一个能被M识别
- 因此half(L)=L(M'),half(L)是正则的
## 习题 4.2.9
我们把习题 4.2.8 推广到能够决定取走串中多大部分的一系列函数．如果 𝑓 是一个整数函数，定义 𝑓(𝐿) 为 {𝑤|对某个满足 |𝑥| = 𝑓(|𝑤|)的 𝑥，𝑤x属于 𝐿}。例如，和运算 ℎ𝑎lf(𝐿) 对应的 𝑓 是恒等函数 𝑓(𝑛) = 𝑛，因为ℎ𝑎lf(𝐿)的定义中有 |𝑥| = |𝑤|．证明：如果 𝐿 是正则的，那么对于以下的 𝑓，𝑓(𝐿) 也是正则的：
- a) 𝑓(𝑛) = 2𝑛（也就是取走串的前三分之一）。 
- b) 𝑓(𝑛) = $𝑛^2$（也就是取走的长度是没取走部分长度的平方根）。
- c) 𝑓(𝑛) = $2^𝑛$（也就是取走的长度是剩下长度的对数）。
#### 解
- 对于正则语言 𝐿，存在一个 DFA $𝑀 = (𝑄, Σ, 𝛿, 𝑞_0,𝐹)$，使得 𝐿(𝑀) = 𝐿。
- 构造 DFA $𝑀' =(𝑄', Σ, 𝛿', 𝑞_0,𝐹')$，其中：
$$Q'=\{[q,S]|q \in Q,在子串w有 \delta(q_0,w)=q时s=\{ \delta(q,w')| w'\in Σ^{f(|w|)}\}\}  $$
$$ \delta'([q,S],a)=[\delta(q,a),T]$$
$$(T=\{t|在子串w有 \delta(q_0,w)=q时,所有x \in Σ^{f(|w|+1)-f(|w|)},s\in S, \delta(s,x)=t\})$$
$$ F'=\{[q,S]|F \cap s \neq \emptyset\}$$

- 因为能被M'识别的串(长度为n)，在后面加入任意长度为f(n)的串组成的新串一定存在一个能被M识别
- 因此𝑓(𝐿)=L(M'),𝑓(𝐿))是正则的
## 补充习题 1
给出如下的正则文法 G，求出对应的 DFA M，使得 L(M) = L(G)
- 1） G1 =（V，T，P1，S） 
	P1: S→bB, B→aB | bA | b, A→a | aS
	- NFA
	![[Pasted image 20241114224650.png]]
	- DFA
	![[Pasted image 20241114225158.png]]
- 2） G2= (V，T，P2，S） 
	P2：S→aS | bB | a, B→bA | aB | aS
	- NFA
	![[Pasted image 20241114225835.png]]
	- DFA
	![[Pasted image 20241114233312.png]]


## 补充习题 2
给出下图描述的两个 DFA M，分别求出对应的正则文法 G，使得 L(G)=L(M)。
![[Pasted image 20241113135551.png]]
- 1)
	- G1 =（V，T，P1，A） 
	- P1: A→0A|1B|𝜀,
		- B→1B | 0C|1,
		- C→0C|1C
- 2)
	- G2= (V，T，P2，A）
	- P2：A→𝜀|0B | 1D, 
		- B→0A|1D|𝜀,
		- C→1B|0D,
		- D→1B|0C|𝜀
## 补充习题3
Let $L1 ⊆ \{0, 1, 2\}^∗$ be a regular language, we can consider L1 as a subset of integers under base 3, let L2 be the corresponding set of L1 over $\{0, 1\}^∗$ (i.e. under base 2), for example if L1 = {11, 12, 121}, then L2 = {100, 101, 10000}. 
Question: is L2 a regular language?
- 𝐿1是有限长度的则𝐿2是正则语言，否则不一定是
- 证明：
- 𝐿1是有限长度的则𝐿2是正则语言:
	- 如果 $L_{1}$ 是一个有限长度的正则语言，那么 $L_{1}$ 能被DFA识别。$L_{1}$的子串可以转换为$L_{2}$的，那么，$L_{2}$ 也可以被一个DFA识别
- 𝐿1不是有限长度的则𝐿2不一定是正则语言:
	- 反例：考虑 $L_{1}$ 表示在三进制下3的倍数的整数，即其正则表达式是 $10^{*}$。相应地，$L_{2}$ 表示在二进制下是3的倍数的整数。假设 $L_{2}$ 是一个正则语言，然后考虑一个长度大于 $L_{2}$ 泵长的字符串 $w_{1}$。根据泵引理，它可以被分解为 $w_{1}=x y z$，因此

$$
2^{|y|+|z|}\cdot|x|+2^{|z|}\cdot|y|+|z|=3^{i}
$$

 $w_{2}=x y y z=2^{2|y|+|z|}|x|+2^{|z|}\cdot|y|+2^{|y|+|z|}\cdot|y|+|z|$

$$
\begin{align*}
\left[w_{2}\right]-\left[w_{1}\right]=&\left(2^{2|y|+|z|}\cdot|x|+2^{|z|}\cdot|y|+2^{|y|+|z|}\cdot|y|+|z|\right)\\
&-\left(2^{|y|+|z|}\cdot|x|+2^{|z|}\cdot|y|+|z|\right)\\
=&\left(\left(2^{2|y|+|z|}-2^{|y|+|z|}\right)\cdot|x|+2^{|y|+|z|}\cdot|y|\right)\\
=& 2^{|y|+|z|}\left(\left(2^{|y|}-1\right)\cdot|x|+|y|\right)
\end{align*}
$$

若$w_2 \in l_2,则w_2=2^j,j大于i$，所以 $\left[w_{2}\right]-\left[w_{1}\right]$ 必须有一个因子 $\left[w_{1}\right]$（因为$3^j-3^i|3^i,j大于i$）。$(2^{|y|}-1)\cdot|x|+|y|<2^{|y|+|z|}\cdot|x|+2^{|z|}\cdot|y|+|z|=\left[w_{1}\right]$，并且 $2^{| y|+| z|}$ 没有3这个因子，所以 $\left[w_{2}\right]-\left[w_{1}\right]$ 没有因子 $\left[w_{1}\right]$。因此，$w_{2}$ 不属于 $L_{2}$，所以 $L_{2}$ 不是一个正则语言。