# 第5次作业 – 上下文无关文法与下推自动机
## 习题 5.1.5 
设集合 $T = \{0, 1, +, \cdot, *, \phi, e\}$，可以看作字母表 $\{0, 1\}$ 的正则表达式使用的符号集合，其中用 $e$ 表示符号 $\varepsilon$，以避免混淆。任务是以 $T$ 为终结符号集合设计一个上下文无关文法 (CFG)，生成的语言恰好是字母表 $\{0, 1\}$ 的正则表达式。
**解答**: 
- 构造 CFG $G=(V, T, P, S)$，其中: 
	- $V = \{S\}$ -
	- $T = \{0, 1, +, \cdot, *, \phi, e\}$ 
	- 产生式 $P:S → S + S | S · S | S^* | S | 0 | 1 | \phi | e$

## 习题 5.2.2
假设 $G$ 是一个 CFG，其产生式右部不包含 $\varepsilon$。如果 $w \in L(G)$ 且 $w$ 的长度为 $n$，存在一个 $m$ 步推导，证明 $w$ 的语法分析树包含 $n + m$ 个节点。

**证明**:
- 叶节点有n个
通过数学归纳法证明。
- 若 $m = 1$，即推导只有一步。设 $w \in L(A)$，则存在产生式 $A → w$，节点数为 $n + 1 = n + m$。
-  归纳：
假设 $m-1$ 步推导时结论成立，且对任意 $B → w_i$ 均有 $|w_i| + m_i = n_i + m_i$。分析 $m$ 步推导的情况:
- 设最后一步推导为 $A → X_1 X_2 \cdots X_k$，其中 $X_i$ 为变元或终结符。
- 对于 $X_i → w_i$，$w_i$ 的长度为 $n_i$，推导步数为 $m_i$。

总推导步数:
$$ m = 1 + \sum m_i $$
总节点数:
$$  \sum (n_i + m_i) + 1 = n + m $$

得证。

## 习题 5.2.3
假设在习题 5.2.2 中除了 𝐺 中可能有右端为 𝜀 的产生式外其他所有的条件都满足，证明此时 𝑤（ 𝑤 不是 𝜀 ）的语法分析树有可能包含 $n+2m-1$ 个节点，但不可能更多。

**证明**:
类似习题 5.2.2，补充考虑 $\varepsilon$ 的影响，如果叶节点的标号是 $\varepsilon$，那么它一定是其父节点唯一的子节点.
- 若 $m = 1$，即推导只有一步。设 $w \in L(A)$，则存在产生式 $A → w$，节点数为 $n + 1 = n + 2m-1$。
-  归纳：
假设 $m-1$ 步推导时结论成立，且对任意 $B → w_i$ 均有 $|w_i| + m_i = n_i + m_i$。分析 $m$ 步推导的情况:
- 设最后一步推导为 $A → X_1 X_2 \cdots X_k$，其中 $X_i$ 为变元或终结符。
- 对于 $X_i → w_i$，$w_i$ 的长度为 $n_i$，推导步数为 $m_i$。

总推导步数:
$$ m = 1 + \sum m_i $$
总节点数c:
$$ 

\begin{align*}
c &= 1 + \sum_{i=1}^{k} c_{i} \\
&\leq 1 + (n_{1} + 2m_{1} - 1) + \cdots + (n_{j} + 2m_{j} - 1) + (n_{j+1} + 2m_{j+1}) + \cdots + (n_{k} + 2m_{k}) \\
&= 1 + \sum_{i=1}^{k} n_{i} + 2\sum_{i=1}^{k} m_{i} - j \\
&= n + 2(m - 1) + 1 - j \\
&= n + 2m - 1 - j \\
&\leq n + 2m - 1
\end{align*}

$$

得证。

总结：推导步数=变元数，因 𝑤 不是 𝜀 ，根变元不能推出 𝜀

## 习题 5.4.7
 下面的文法生成的是具有 $x$ 和 $y$ 操作数及二元运算符 $+, -, *$ 的前缀表达式:$$E → +EE | -EE | *EE | x | y$$a) 找到串 $+*-xyxy$ 的最左推导、最右推导和一棵语法分析树。
 - 最左推导(优先最左的变元)
	 - $E\implies +EE \implies +*EEE\implies +*-EEEE$
	 - $\implies +*-XEEE \implies +*-xyEE$
	 - $\implies+*-xyxE \implies +*-xyxy$
 - 最右推导(优先最右的变元)
	 - $E\implies +EE\implies+Ey\implies+*EEy$
	 - $\implies+*Exy\implies+*-EExy$
	 - $\implies+*-Eyxy\implies+*-xyxy$
 - 语法分析树
 ```mermaid
graph TD
style A stroke:none,fill:none
style B stroke:none,fill:none
style C stroke:none,fill:none
style D stroke:none,fill:none
style X stroke:none,fill:none
style Y stroke:none,fill:none
style Z stroke:none,fill:none
E--> A(+)
E--> E1
E--> E2
E1(E)--> B(*)
E1(E) --> E3(E)
E1(E) --> E4(E)
E2(E) --> Z(y)
E3(E)--> E5(E)
E4(E) --> Y(x)
E5(E) --> C(—)
E5(E) --> D(x)
E5(E) --> X(y)
```

b) 证明这个文法是无歧义的。
- 对于$E → +EE | -EE | *EE | x | y$
- 先证操作符与操作数的分组方式是唯一的
	- 前缀表达式中的操作符 +,−,∗ 必须始终**作用于**其后紧随的两个子表达式（操作数或子树）。
	- 操作符的个数与操作数的个数满足严格的关系：
	    - 操作符个数始终比操作数个数少 1。
	- 因此，对于任意字符串，操作符与操作数的分组方式是唯一的。
- 归纳证明语法分析树都是唯一
	-  **基础情况**: 若 EEE 推导出 xxx 或 yyy，则语法分析树只有一个叶子节点，结构唯一。    
	- **归纳假设**: 假设对于长度为 k 的表达式，语法分析树是唯一的。    
	- **归纳步骤**: 对于长度为 k+1的表达式：    
	    - 若 $E→+EE∣−EE∣∗EE$，操作符 +,−,∗将表达式分成两个子表达式 E和 E。
	    - 根据归纳假设，这两个子表达式的结构是唯一的。
	    - 操作符的位置固定，两个子表达式的顺序确定，因此整个表达式的语法分析树是唯一的。
根据数学归纳法，文法生成的所有表达式的语法分析树都是唯一的。因此是无歧义的
## 补充习题 1
 构造接受以下语言的 PDA:
1. $\{ 0^n 1^m | n \geq m\geq1 \}$
	1. ![[Pasted image 20241218192043.png]]
2. $\{ 1^n 0^n 1^m 0^m | n, m \geq 1 \}$
	1. ![[Pasted image 20241218201545.png]]
3. 含有 0 和 1 个数相同的所有 $\{0, 1\}$ 串。
![[Pasted image 20241218195820.png]]

## 补充习题 2
构造一个 PDA，使其等价于以下文法:
$$S → aAA ,A → aS | bS | a$$
![[Pasted image 20241218200409.png]]